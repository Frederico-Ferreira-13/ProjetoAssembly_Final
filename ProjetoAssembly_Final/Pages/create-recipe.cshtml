@page
@model ProjetoAssembly_Final.Pages.create_recipeModel
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<ProjetoAssembly_Final.Pages.IndexModel> Localizer
@{
    Layout = "_Layout";
    ViewData["Title"] = @Localizer["Crie a sua Receita"];
}

@section Styles {
    <link rel="stylesheet" href="~/css/create-recipe.css" asp-append-version="true" />
}

<main class="container">
    <h1>@Localizer["Submeter Nova Receita"]</h1>

    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

    <form method="post" enctype="multipart/form-data">
        <div class="input-group">
            <label asp-for="Titulo">@Localizer["Mome da Receita"]</label>
            <input asp-for="Titulo" placeholder="@Localizer["Ex: Bacalhau à Brás Especial"]" required>
            <span asp-validation-for="Titulo" class="text-danger"></span>
        </div>

        <div class="input-group">
            <label asp-for="Descricao">@Localizer["Instruções de Preparação"]</label>
            <textarea asp-for="Descricao" rows="5" placeholder="@Localizer["Descreva os passos detalhadamente..."]" required></textarea>
            <span asp-validation-for="Descricao" class="text-danger"></span>
        </div>

        <div class="row">
            <div class="input-group" style="flex: 1;">
                <label asp-for="CategoriaSelecionada">@Localizer["Categoria"]</label>
                <select asp-for="CategoriaSelecionada" required>
                    <option value="">@Localizer["Selecione.."]</option>
                    <option value="1">@Localizer["Entradas/Sopas"]</option>
                    <option value="2">@Localizer["Prato Principal"]</option>
                    <option value="3">@Localizer["Sobremesas"]</option>
                </select>
            </div>

            <div class="input-group">
                <label asp-for="DificuldadeSelecionada">@Localizer["Dificuldade"]</label>
                <select asp-for="DificuldadeSelecionada" required>
                    <option value="">@Localizer["Selecione.."]</option>
                    <option value="1">@Localizer["Fácil"]</option>
                    <option value="2">@Localizer["Médio"]</option>
                    <option value="3">@Localizer["Difícil"]</option>
                </select>
            </div>
        </div>

        <h3>@Localizer["Ingredientes"]</h3>
        <div id="lista-ingredientes">
            <div class="ingrediente-linha" style="display: flex; gap: 10px; margin-bottom: 10px;">
                <input type="number" name="QuantityValue[]" placeholder="Qtd" step="0.01" style="width: 70px;">
                <input type="text" name="Unit[]" placeholder="Unid." style="width: 80px;">
                <input type="text" name="IngredientName[]" placeholder="Ingrediente" style="flex: 1;" required>
            </div>
        </div>
        <button type="button" id="btn-add-ingrediente">+ @Localizer["Adicionar Ingrediente"]</button>

        <div class="input-group">
            <label>@Localizer["Imagem da Receita"]</label>
            <input type="file" name="RecipeImage" accept="image/*">
        </div>

        <button type="submit" class="btn-guardar">@Localizer["Guardar Receita"]</button>
    </form>
</main>

@section Scripts {
    <partial name="_ValidationScriptsPartial" /> <script src="~/js/ingredientes.js"></script>
}

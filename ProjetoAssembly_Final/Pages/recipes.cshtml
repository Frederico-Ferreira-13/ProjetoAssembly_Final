@page
@model ProjetoAssembly_Final.Pages.recipesModel
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<ProjetoAssembly_Final.Pages.IndexModel> Localizer
@{
    Layout = "_Layout";
    ViewData["Title"] = Localizer["Explorar Receitas"];
}

@section Styles {
    <link rel="stylesheet" href="~/css/pages/recipe.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/pages/recipes-card.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/pages/favorits.css" asp-append-version="true" />    
}

<div class="main-wrapper">
    <section class="category-section">
        <h2 class="section-title">@Localizer["Explorar Receitas"]</h2>
        <div class="category-nav">
            <a asp-page="/recipes" class="category-item @(string.IsNullOrEmpty(Request.Query["categoryId"]) ? "active" : "")">
                <div class="cat-icon"><i class="fa-solid fa-list"></i></div>
                <span>@Localizer["Todas"]</span>
            </a>
            <a asp-page="/recipes" asp-route-categoryId="9993" class="category-item @(Request.Query["categoryId"] == "1" ? "active" : "")">
                <div class="category-icon"><i class="fa-solid fa-bowl-food"></i></div>
                <span>@Localizer["Sopas"]</span>
            </a>
            <a asp-page="/recipes" asp-route-categoryId="9992" class="category-item @(Request.Query["categoryId"] == "2" ? "active" : "")">
                <div class="category-icon"><i class="fa-solid fa-drumstick-bite"></i></div>
                <span>@Localizer["Carne"]</span>
            </a>
            <a asp-page="/recipes" asp-route-categoryId="9994" class="category-item @(Request.Query["categoryId"] == "3" ? "active" : "")">
                <div class="category-icon"><i class="fa-solid fa-fish"></i></div>
                <span>@Localizer["Peixe"]</span>
            </a>
            <a asp-page="/recipes" asp-route-categoryId="9995" class="category-item @(Request.Query["categoryId"] == "4" ? "active" : "")">
                <div class="cat-icon"><i class="fa-solid fa-leaf"></i></div>
                <span>@Localizer["Vegetariano"]</span>
            </a>
            <a asp-page="/recipes" asp-route-categoryId="9991" class="category-item @(Request.Query["categoryId"] == "5" ? "active" : "")">
                <div class="category-icon"><i class="fa-solid fa-cake-candles"></i></div>
                <span>@Localizer["Sobremesas"]</span>
            </a>           
        </div>
    </section>

    <hr class="separator-light">

    <section class="results-section">
        @if (!string.IsNullOrEmpty(Model.Search))
        {
            <div class="search-info mb-4">
                @Localizer["Resultados para: "] <strong>"@Model.Search"</strong>
            </div>
        }

        <div id="container-recipe" class="recipe-grid">
            @if (Model.ListRecipes != null && Model.ListRecipes.Any())
            {
                @foreach (var receita in Model.ListRecipes)
                {
                    <partial name="_RecipesCard" model="receita"></partial>
                }
            }
            else
            {
                <div class="empty-notice">
                    <i class="fa-solid fa-utensils-slash fa-4x mb-4" style="color: #28a745;"></i>
                    <h3>@Localizer["Nenhuma receita encontrada"]</h3>
                    <p class="text-muted mb-4">
                        @Localizer["Ainda não temos receitas com esses critérios..."]<br />
                        @Localizer["Que tal criares uma nova receita incrível?"]
                    </p>
                    <a asp-page="/createRecipe" class="btn-card btn-lg" style="padding: 14px 36px; font-size: 1.1rem;">
                        <i class="fa-solid fa-plus me-2"></i> @Localizer["Criar Receita"]
                    </a>
                    <a asp-page="/recipes" class="btn-card mt-3" style="padding: 12px 30px;">
                        @Localizer["Limpar filtros"]
                    </a>
                </div>
            }
        </div>

        @if(Model.TotalPages > 1)
        {
            <div class="pagination-container">
                <a asp-page="/recipes"
                    asp-route-p="@(Model.P - 1)"
                    asp-route-CategoryId="@Model.CategoryId"
                    asp-route-search="@Model.Search"
                    class="btn-pag @(Model.P == 1 ? "disabled" : "")">
                    <i class="fa-solid fa-chevron-left"></i>
                </a>

                @for(int i = 1; i <= Model.TotalPages; i++)
                {
                    <a asp-page="/recipes"
                        asp-route-p="@i"
                        asp-route-categoryId="@Model.CategoryId"
                        asp-route-search="@Model.Search"
                        class="btn-pag @(i == Model.P ? "active" : "")">@i</a>
                }

                <a asp-page="/recipes"
                   asp-route-p="@(Model.P + 1)"
                   asp-route-categoryId="@Model.CategoryId"
                   asp-route-search="@Model.Search"
                   class="btn-pag @(Model.P == Model.TotalPages ? "disabled" : "")">
                    <i class="fa-solid fa-chevron-right"></i>
               </a>
            </div>
        }
    </section>
</div>
